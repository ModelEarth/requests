<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="UTF-8">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Arts Engine | Codex</title>
<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link type="text/css" rel="stylesheet" href="/localsite/css/base.css" id="/localsite/css/base.css" />
<link type="text/css" rel="stylesheet" href="css/app.css" />
<script type="text/javascript" src="/localsite/js/localsite.js?showheader=true&showsearch=false"></script>
<link rel="stylesheet" href="/projects/css/issues.css">
<script src="/projects/js/issues.js"></script>
<script src="js/app.js" defer></script>
</head>
<body>
<div class="content contentpadding ae-shell">
  <header class="ae-header ae-panel" id="heroPanel">
    <h1>Arts Engine</h1>
    <p>Prompt-driven text, image, and video generation powered by xAI Grok through a Rust API.</p>
    <div class="ae-chip-row">
      <span class="ae-chip">CSV Prompt Queue</span>
      <span class="ae-chip">Storyboard Modes</span>
      <span class="ae-chip">GitHub Publish</span>
      <span class="ae-chip">Map Context Panel</span>
    </div>
  </header>

  <div class="ae-layout" id="appLayout">
    <section class="ae-panel" id="promptPanel">
      <h2>Prompt Composer</h2>
      <label class="ae-label" for="promptInput">Prompt</label>
      <textarea id="promptInput" class="ae-input" rows="6" placeholder="Describe the scene, style, and constraints."></textarea>
      <div class="ae-actions">
        <button class="ae-btn" id="generateTextBtn" type="button">Generate Text</button>
        <button class="ae-btn" id="generateImageBtn" type="button">Generate Image</button>
        <button class="ae-btn" id="generateVideoBtn" type="button">Generate Video</button>
      </div>
      <p class="ae-hint">Tip: choose a CSV prompt below and it will populate here.</p>
    </section>

    <section class="ae-panel" id="queuePanel">
      <h2>Prompt Queue (CSV)</h2>
      <div class="ae-inline-grid">
        <input id="csvFileInput" class="ae-input" type="file" accept=".csv,text/csv" />
        <button class="ae-btn ae-btn-soft" id="loadCsvBtn" type="button">Load CSV</button>
      </div>
      <label class="ae-label" for="promptSelect">Loaded Prompts</label>
      <select id="promptSelect" class="ae-input" size="8"></select>
      <div class="ae-inline-grid">
        <button class="ae-btn ae-btn-soft" id="useSelectedPromptBtn" type="button">Use Selected Prompt</button>
        <button class="ae-btn ae-btn-soft" id="runSelectedPromptBtn" type="button">Run Selected Prompt</button>
      </div>
    </section>

    <section class="ae-panel" id="optionsPanel">
      <h2>Generation Settings</h2>
      <label class="ae-label" for="backendUrlInput">Rust API URL</label>
      <input id="backendUrlInput" class="ae-input" type="url" value="http://localhost:8091" />

      <div class="ae-grid-two">
        <div>
          <label class="ae-label" for="textModelInput">Text Model</label>
          <input id="textModelInput" class="ae-input" type="text" value="grok-3-mini-beta" />
        </div>
        <div>
          <label class="ae-label" for="imageModelInput">Image Model</label>
          <input id="imageModelInput" class="ae-input" type="text" value="grok-2-image" />
        </div>
      </div>

      <div class="ae-grid-two">
        <div>
          <label class="ae-label" for="videoModelInput">Video Model</label>
          <input id="videoModelInput" class="ae-input" type="text" value="grok-2-video" />
        </div>
        <div>
          <label class="ae-label" for="aspectRatioSelect">Aspect Ratio</label>
          <select id="aspectRatioSelect" class="ae-input">
            <option value="1:1">Square 1:1</option>
            <option value="16:9" selected>Horizontal 16:9</option>
            <option value="4:3">Horizontal 4:3</option>
            <option value="9:16">Vertical 9:16</option>
            <option value="3:4">Vertical 3:4</option>
          </select>
        </div>
      </div>

      <div class="ae-grid-two">
        <div>
          <label class="ae-label" for="temperatureInput">Temperature</label>
          <input id="temperatureInput" class="ae-input" type="number" min="0" max="2" step="0.1" value="0.7" />
        </div>
        <div>
          <label class="ae-label" for="maxTokensInput">Max Tokens</label>
          <input id="maxTokensInput" class="ae-input" type="number" min="32" max="8192" step="1" value="800" />
        </div>
      </div>

      <label class="ae-label" for="systemPromptInput">System Prompt</label>
      <textarea id="systemPromptInput" class="ae-input" rows="3" placeholder="Optional persona/instruction for text generation."></textarea>

      <div class="ae-actions">
        <button class="ae-btn ae-btn-soft" id="loadModelsBtn" type="button">Load Models</button>
        <button class="ae-btn ae-btn-soft" id="saveSettingsBtn" type="button">Save Settings</button>
      </div>
      <div id="modelsOutput" class="ae-status"></div>
    </section>

    <section class="ae-panel" id="resultsPanel">
      <h2>Generation Output</h2>
      <pre id="resultText" class="ae-output">No output yet.</pre>
      <div id="resultMeta" class="ae-status"></div>
      <div id="locationList" class="ae-location-list"></div>
    </section>

    <section class="ae-panel" id="galleryPanel">
      <h2>Storyboard Gallery</h2>
      <div id="galleryOutput" class="ae-gallery"></div>
    </section>

    <section class="ae-panel" id="mapPanel">
      <h2>Map Context</h2>
      <p class="ae-hint">Reuses the existing `team/js/map.js` interface for location-aware storytelling context.</p>
      <iframe id="teamMapFrame" src="/team/projects/map/#show=liaisons&id=5" title="Team map context"></iframe>
    </section>

    <section class="ae-panel" id="publishPanel">
      <h2>Publish to GitHub</h2>
      <p class="ae-hint">Use your cached GitHub token from the existing widget to publish generated output.</p>
      <div id="issues-root"></div>
      <div class="ae-grid-two">
        <div>
          <label class="ae-label" for="githubOwnerInput">Owner</label>
          <input id="githubOwnerInput" class="ae-input" type="text" placeholder="username-or-org" />
        </div>
        <div>
          <label class="ae-label" for="githubRepoInput">Repo</label>
          <input id="githubRepoInput" class="ae-input" type="text" placeholder="repo-name" />
        </div>
      </div>
      <div class="ae-grid-two">
        <div>
          <label class="ae-label" for="githubBranchInput">Branch</label>
          <input id="githubBranchInput" class="ae-input" type="text" value="main" />
        </div>
        <div>
          <label class="ae-label" for="githubPathInput">File Path</label>
          <input id="githubPathInput" class="ae-input" type="text" value="gallery/generated/arts-engine-output.json" />
        </div>
      </div>
      <div class="ae-actions">
        <button class="ae-btn" id="publishBtn" type="button">Publish Latest Output</button>
      </div>
      <div id="publishStatus" class="ae-status"></div>
    </section>
  </div>
</div>
</body>
</html>
